---
title: "Hito 2: Distribución del juego"
description: "Desarrollo de una alpha del juego"
order: 3
---
En esta práctica, continuaremos el desarrollo del juego, pero le pondremos especial atención automática a través de _makefiles_, el empaquetado de _software_ y la creación, finalmente, de un proyecto autoconfigurable. Debido a que esta práctica es más progresiva, centraremos el desarrollo tres entregables y un objetivo general:

## Entregable 1: Makefiles y ccache

En este primer entregable, deberéis desarrollar el sistema de compilado de vuestras aplicaciones a través de _makefiles_. Estos ficheros deberán de ser lo más genéricos posibles. Es decir, que no debáis modificarlos excesivamente si introducís cambios en vuestros juegos (carpetas nuevas, librerías, etc). **La estructura de vuestros proyectos en `src` deberá contener, al menos, dos carpetas**. Por lo tanto, deberéis de escoger una estrategia de gestión de proyectos multidirectorio y aplicarla. 
Se deberán aplicar para esta entrega, como mínimo, las siguientes reglas:
- `all` para la compilación por defecto.
- `clean` para limpiar la compilación del proyecto.

Asímismo, deberéis también realizar algunos ejercicios sobre compilación multi-hilo y `ccache`.

Por lo tanto, el primer etregable consistirá en:
1. El código fuente del proyecto con sus correspondientes _makefiles_.
2. Un fichero `Markdown` que responda, de forma concisa, a estas preguntas:
    1. Comprobad tiempos de ejecución de la compilación con diversos valores para `N` en `-jN`. ¿A partir de qué valores de N ya no supone una mejora sustancial el incremento en el número de trabajos en paralelo?
    2. ¿Hay fallos de compilación con ejecuciones en paralelo? Si es así tratad de ver por qué se producen y procurad solucionarlos.
    3. Aplicad `ccache` en la compilación del proyecto y compara el tiempo de ejecución de la compilación con y sin esta herramienta.
    4. Borrad las estadísticas de `ccache` y limpiadla. Después, ejecutad dos veces la compilación con esta herramienta y analizad las estadísticas que proporciona la herramienta.

## Entregable 2: Empaquetado de _software_

En este segundo entregable, nos centraremos en realizar la distribución de nuestro _software_ a través de los sistemas de paquetes vistos en teoría. Para ello, deberéis realizar lo siguiente:

1. Elegid un sistema de paquetes: en teoría hemos visto `.deb` y en prácticas `flatpak`.
2. Elaborad las reglas que requiere el sistema de paquetes que vais a usar (normalmente `all`, `clean` e `install`) en vuestro `Makefile`. Por otro lado, se recomienda generar una regla `dist` para llamar automáticamente al sistema de paquetes.
3. Cread un fichero instalable e instaladlo en algún sistema operativo para comprobar que, efectivamente, el empaquetado de aplicaciones funciona.
4. Elaborad una acción en GitHub donde, para cada _release_ nueva que creéis en vuestro _software_, se cree automáticamente el paquete instalable de vuestro juego.

**En este entregable deberéis añadir el código fuente del repositorio (con la acción incluida) y el paquete instalable creado para esa versión específica.**

## Entregable 3: Proyecto autoconfigurable y aplicación multiplataforma

En este tercer, y último entregable del hito, deberéis crear un proyecto autoconfigurable para compilar vuestro juego en distintos sistemas operativos. Para ello, deberéis realizar lo siguiente:

1. Elegir un _build system_ para realizar la tarea. En teoría hemos visto `CMake`, `Meson` y `Premake`.
2. Desarrollar el proyecto autoconfigurable para dos sistemas específicos: **Linux y Windows**. Esto quiere decir que deberéis comprobar que el proyecto compila correctamente en ambos sistemas operativos.

**En este entregable deberéis añadir solo el código fuente del repositorio**

---

## Avance general del juego

En esta entrega, los juegos deben avanzar un poco en su desarrollo. Por lo tanto, se requiere que el juego que se entregue cumpla las siguientes condiciones:

- **Bucle de juego completo**. El jugador debe poder iniciar una partida, jugar y ganar o perder. Esto implica, como mínimo, la implementación de tres pantallas (menú principal, estado de juego y fin de partida). 

- **Implementación de gráficos**. La versión del juego que se entregue deberá contar ya con la mayoría de los elementos gráficos del juego. La carga y el manejo de _sprites_ y las fuentes deberá de estar implementada y se debe demostrar que el juego ya funciona con recursos gráficos no básicos. 

- **Gestor de recursos**. Dado que esta entrega ya pide el uso de recursos cargados desde disco, la **gestión de estos recursos** deberá realizarse de forma eficiente a través de un **gestor de recursos**. Este elemento deberá gestionar el acceso bajo demanda de los recursos gráficos, y tratar de hacer las mínimas lecturas posibles desde el disco duro. Asímismo, deberemos garantizar de que, durante la ejecución del juego, solo exista una instancia de este elemento.

**Debido a que váis a trabajar con varios entregables y algunos sobreescriben otros, se recomienda mantener como última versión el último entregable, los avances del juego se evaluarán sobre este.**


## Entrega

La entrega de esta práctica se realizará a través del módulo de evaluación del UA Cloud. Solo es necesrio que entregue **un miembro del grupo**, ya que puede indicar el resto de componentes a través de esta entrega. Se deberá entregar (en un fichero comprimido .tar.gz o .zip) lo siguiente:

* Un fichero comprimido de cada entregable con los elementos solicitados


**Fecha de entrega:** 3 de diciembre de 2025.

